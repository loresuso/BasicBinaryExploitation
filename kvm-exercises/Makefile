CXXFLAGS=-g
ASFLAGS=-g
LDFLAGS=

all: kvm-1 kvm-2 kvm-3 guest

kvm-1:
	g++ -o kvm-1 -g -DKVM_1 -no-pie kvm.cc

kvm-2:
	g++ -o kvm-2 -g -DKVM_2 -no-pie kvm.cc

kvm-3:
	g++ -o kvm-3 -g -DKVM_3 kvm.cc

guest: guest.s guest.c
	gcc -o guest guest.s guest.c -nostartfiles -nostdlib -Ttext 1000 -static

.PHONY: clean
clean:
	rm -f kvm-[1-3] *.o a.out
